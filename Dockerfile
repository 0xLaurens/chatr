####################################################################################################
## Build image
####################################################################################################
FROM rust as builder

WORKDIR /chatr
COPY . .

RUN USER=root cargo build --release

####################################################################################################
## Final image
####################################################################################################
FROM alpine:latest

COPY --from=builder /chatr/target/release/chatr /bin/chatr
RUN ls /bin/chatr

CMD ["chatr"]